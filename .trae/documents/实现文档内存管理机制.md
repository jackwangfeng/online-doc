## 问题分析
当前实现中，当所有客户端关闭连接后，服务器不会从内存中移除对应的文档/roomid。文档会一直保存在 `persistence.docs` 缓存中，直到服务器重启，这可能导致内存泄漏。

## 解决方案
实现一个连接计数器，跟踪每个 room 的活跃连接数，当连接数为 0 时，从缓存中删除文档。

## 实现步骤

### 1. 修改服务器代码 (`server/index.js`)
- 添加连接计数器，跟踪每个 room 的活跃连接数
- 在新连接时增加计数器
- 在连接关闭时减少计数器
- 当计数器为 0 时，调用 `persistence.clearDocument()` 清理缓存

### 2. 修改持久化层 (`server/yjs-persistence.js`)
- 确保 `clearDocument` 方法正确从缓存中删除文档
- 可选：添加方法仅清理内存缓存，保留数据库数据

### 3. 测试验证
- 启动服务器
- 连接多个客户端到同一文档
- 逐一关闭客户端
- 验证服务器在最后一个客户端关闭后清理内存

## 技术要点
- 使用 Map 存储每个 room 的连接数
- 确保线程安全的计数器操作
- 正确处理异常情况
- 保持与现有代码的兼容性